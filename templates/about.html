{% extends "base.html" %}

{% block title %}About the Project{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto px-4 py-8">

    <!-- 1. Header Section -->
    <div class="text-center mb-6">
        <!-- University Logo -->
        <div class="mb-4 flex justify-center">
            <img src="{{ url_for('static', filename='img/university_logo.png') }}"
                alt="Mahachulalongkornrajavidyalaya University" class="h-24 md:h-28 w-auto object-contain">
        </div>

        <!-- Thesis Title -->
        <h1 class="text-2xl md:text-2xl font-bold text-gray-900 leading-relaxed max-w-2xl mx-auto">
            A Study of the development of English pronunciation skills among Asian EFL learners through supplementary
            speaking practice at the Faculty of Education of Mahachulalongkorn University in Thailand
        </h1>

        <!-- Decorative Separator -->
        <div class="w-16 h-1 bg-indigo-500 mx-auto rounded-full mt-6"></div>
    </div>

    <!-- 2. Research Narrative (Single Column) -->
    <div class="prose prose-lg prose-indigo mx-auto text-gray-600 mb-6">
        <h3 class="text-2xl font-bold text-gray-800 mb-6 flex items-center justify-center gap-3">
            <i class="fas fa-book-reader text-indigo-500"></i>
            <span>Research Context</span>
        </h3>

        <p class="mb-6 text-center text-lg">
            This web application serves as the primary instrument for a Master's Thesis for the Education Program in
            English Teaching.
        </p>

        <div class="bg-indigo-50 p-6 rounded-2xl border border-indigo-100 my-8 relative">
            <div
                class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-white px-4 py-1 rounded-full border border-indigo-100 shadow-sm">
                <span class="text-xs font-bold text-indigo-600 uppercase tracking-widest">Core Mision</span>
            </div>
            <p class="font-medium text-indigo-900 text-center leading-relaxed italic">
                "To provide a supplementary speaking practice tool specifically designed to address the phonological
                challenges faced by Asian EFL learners."
            </p>
        </div>

        <p class="leading-relaxed">
            By utilizing real-time acoustic analysis, the system provides immediate visual and articulatory feedback,
            allowing learners to visualize their pronunciation accuracy and make data-driven adjustments to their speech
            production.
        </p>
    </div>

    <!-- 3. Technical Foundation (Horizontal Feature List) -->
    <div class="mb-6">
        <h4 class="text-xs font-bold text-gray-400 uppercase tracking-widest text-center mb-6">Powered By</h4>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm text-center">
                <i class="fas fa-wave-square text-lg text-indigo-500 mb-2 block"></i>
                <span class="font-bold text-gray-800 text-xs">Praat Analysis</span>
            </div>
            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm text-center">
                <i class="fas fa-chart-line text-lg text-purple-500 mb-2 block"></i>
                <span class="font-bold text-gray-800 text-xs">Formant Mapping</span>
            </div>
            <div class="bg-white p-4 rounded-xl border border-gray-100 shadow-sm text-center">
                <i class="fas fa-bolt text-lg text-amber-500 mb-2 block"></i>
                <span class="font-bold text-gray-800 text-xs">Real-time Feedback</span>
            </div>
        </div>
    </div>

    <!-- 4. Developer Profile (Horizontal "Author" Card) -->
    <div class="bg-white rounded-3xl shadow-sm border border-gray-100 p-6 mb-6 relative overflow-hidden">
        <div class="absolute top-0 right-0 w-32 h-32 bg-gray-50 rounded-bl-full -mr-8 -mt-8 z-0"></div>

        <div class="relative z-10 flex flex-col md:flex-row items-center gap-6">
            <!-- Avatar -->
            <div class="flex-shrink-0">
                <img src="{{ url_for('static', filename='img/author_profile.jpg') }}" alt="Konstantin Bantov"
                    class="w-24 h-24 rounded-full object-cover border-4 border-white shadow-md">
            </div>

            <!-- Bio -->
            <div class="text-center md:text-left flex-grow">
                <div class="mb-1">
                    <span class="text-[10px] font-bold text-indigo-500 uppercase tracking-wider">Researcher &
                        Developer</span>
                    <h3 class="text-xl font-bold text-gray-900 mt-1">Konstantin Bantov</h3>
                </div>
                <p class="text-sm text-gray-600 mb-0">
                    Building educational tools that bridge the gap between technology and linguistic pedagogy. Dedicated
                    to improved pronunciation through data-driven feedback.
                </p>
            </div>
        </div>
    </div>

    <!-- 5. Support Section (Icons + Modal) -->
    <div class="border-t border-gray-100 text-center">
        <h3 class="text-sm font-bold text-gray-800 mb-2">Support the Project</h3>
        <p class="text-gray-400 text-xs mb-8">
            This project is self-funded. Tap an icon to contribute.
        </p>

        <div class="flex justify-center items-center gap-8 md:gap-12">
            <!-- PromptPay -->
            <button onclick="openModal('promptpay')"
                class="group flex flex-col items-center gap-2 transition transform hover:scale-110 focus:outline-none">
                <div
                    class="w-14 h-14 bg-white rounded-xl shadow-sm border border-gray-200 group-hover:border-blue-200 group-hover:shadow-md flex items-center justify-center p-2 transition">
                    <img src="{{ url_for('static', filename='img/icon_promptpay.png') }}"
                        class="h-full w-auto object-contain">
                </div>
                <span
                    class="text-[10px] font-bold text-gray-400 group-hover:text-blue-900 uppercase tracking-wider transition">PromptPay</span>
            </button>

            <!-- TrueMoney -->
            <button onclick="openModal('truemoney')"
                class="group flex flex-col items-center gap-2 transition transform hover:scale-110 focus:outline-none">
                <div
                    class="w-14 h-14 bg-white rounded-xl shadow-sm border border-gray-200 group-hover:border-orange-200 group-hover:shadow-md flex items-center justify-center p-2 transition">
                    <img src="{{ url_for('static', filename='img/icon_truemoney.png') }}"
                        class="h-full w-auto object-contain">
                </div>
                <span
                    class="text-[10px] font-bold text-gray-400 group-hover:text-orange-600 uppercase tracking-wider transition">TrueMoney</span>
            </button>

            <!-- Card -->
            <button onclick="openModal('card')"
                class="group flex flex-col items-center gap-2 transition transform hover:scale-110 focus:outline-none opacity-60 hover:opacity-100">
                <div
                    class="w-14 h-14 bg-white rounded-xl shadow-sm border border-gray-200 group-hover:border-indigo-200 group-hover:shadow-md flex items-center justify-center text-indigo-300 group-hover:text-indigo-600 text-xl transition">
                    <i class="far fa-credit-card"></i>
                </div>
                <span
                    class="text-[10px] font-bold text-gray-400 group-hover:text-indigo-600 uppercase tracking-wider transition">Card</span>
            </button>
        </div>
    </div>

</div>

<!-- MODAL & SCRIPTS (Unchanged Logic, refreshed visuals) -->
<div id="support-modal"
    class="fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-blur-sm hidden opacity-0 transition-opacity duration-300">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-sm mx-4 transform scale-95 transition-transform duration-300"
        id="modal-panel">
        <div class="flex justify-between items-center px-6 py-4 border-b border-gray-50">
            <h3 id="modal-title" class="text-sm font-bold text-gray-500 uppercase tracking-widest">Support</h3>
            <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 transition focus:outline-none">
                <i class="fas fa-times text-lg"></i>
            </button>
        </div>
        <div class="p-8 flex flex-col items-center justify-center text-center" id="modal-content"></div>
    </div>
</div>

<template id="tmpl-promptpay">
    <div class="space-y-6">
        <div class="w-56 h-auto bg-white rounded-xl p-2 border border-gray-100 shadow-sm mx-auto">
            <img src="{{ url_for('static', filename='img/qr_promptpay.jpeg') }}" class="w-full h-full object-contain">
        </div>
        <p class="text-sm text-gray-500 font-medium">Scan via any Thai Banking App</p>
    </div>
</template>

<template id="tmpl-truemoney">
    <div class="space-y-6 w-full">
        <div class="w-56 h-auto bg-white rounded-xl p-2 border border-gray-100 shadow-sm mx-auto">
            <img src="{{ url_for('static', filename='img/qr_truemoney.png') }}" class="w-full h-full object-contain">
        </div>
        <div class="w-full bg-orange-50 rounded-xl p-3 flex items-center justify-between border border-orange-100 group cursor-pointer hover:bg-orange-100 transition"
            onclick="copyToClipboard('modal-wallet-id')">
            <span class="font-mono text-gray-800 font-bold tracking-wider text-sm"
                id="modal-wallet-id">066-056-8535</span>
            <i class="far fa-copy text-orange-400 group-hover:text-orange-600"></i>
        </div>
        <p class="text-xs text-gray-400">Tap ID to Copy</p>
    </div>
</template>

<template id="tmpl-card">
    <div class="space-y-6 py-6">
        <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto text-gray-400 text-2xl">
            <i class="fas fa-hammer"></i>
        </div>
        <div>
            <h4 class="text-lg font-bold text-gray-900 mb-2">Coming Soon</h4>
            <p class="text-xs text-gray-500 max-w-xs mx-auto leading-relaxed">
                We are working on integrating <span class="font-bold text-indigo-600">Stripe</span> & <span
                    class="font-bold text-blue-600">Omise</span> for secure card payments.
            </p>
        </div>
        <div class="flex justify-center gap-3 text-2xl text-gray-300 pt-2">
            <i class="fab fa-cc-visa"></i>
            <i class="fab fa-cc-mastercard"></i>
            <i class="fab fa-stripe"></i>
        </div>
    </div>
</template>

<div id="copy-toast"
    class="fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-6 py-3 rounded-full shadow-2xl opacity-0 transition-opacity duration-300 pointer-events-none z-50 flex items-center gap-2">
    <i class="fas fa-check-circle text-emerald-400"></i>
    <span class="text-sm font-medium">Copied!</span>
</div>

<script>
    const modal = document.getElementById('support-modal');
    const modalPanel = document.getElementById('modal-panel');
    const modalTitle = document.getElementById('modal-title');
    const modalContent = document.getElementById('modal-content');

    function openModal(type) {
        let contentHtml = "";
        let title = "Support";

        if (type === 'promptpay') {
            title = "Thai PromptPay";
            contentHtml = document.getElementById('tmpl-promptpay').innerHTML;
        } else if (type === 'truemoney') {
            title = "TrueMoney Wallet";
            contentHtml = document.getElementById('tmpl-truemoney').innerHTML;
        } else if (type === 'card') {
            title = "Credit Card";
            contentHtml = document.getElementById('tmpl-card').innerHTML;
        }

        modalTitle.innerText = title;
        modalContent.innerHTML = contentHtml;

        modal.classList.remove('hidden');
        setTimeout(() => {
            modal.classList.remove('opacity-0');
            modalPanel.classList.remove('scale-95');
            modalPanel.classList.add('scale-100');
        }, 10);
    }

    function closeModal() {
        modal.classList.add('opacity-0');
        modalPanel.classList.remove('scale-100');
        modalPanel.classList.add('scale-95');
        setTimeout(() => {
            modal.classList.add('hidden');
        }, 300);
    }

    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });

    function copyToClipboard(elementId) {
        const textToCopy = document.getElementById(elementId).innerText;
        navigator.clipboard.writeText(textToCopy).then(() => {
            const toast = document.getElementById('copy-toast');
            toast.classList.remove('opacity-0');
            setTimeout(() => {
                toast.classList.add('opacity-0');
            }, 2000);
        });
    }
</script>
{% endblock %}